"use strict";(self["webpackChunkvue_ts_learn"]=self["webpackChunkvue_ts_learn"]||[]).push([[917],{1284:function(e,t,a){var n=a(4479),r=a(4287);t["Z"]={async reserveApartment(e,t){const a=(0,r.JU)(n.db,"users",t);try{const t=await(0,r.r7)(a,{reserved:(0,r.vr)(e)});return t}catch(i){console.error("Error adding document: ",i)}},async unReserveApartment(e,t){const a=(0,r.JU)(n.db,"users",t);try{const t=await(0,r.r7)(a,{reserved:(0,r.Ab)(e)});return t}catch(i){console.error("Error adding document: ",i)}},async getReserve(e){try{const t=await(0,r.PL)((0,r.hJ)(n.db,"users"));let a={reserved:[]};return t.forEach((t=>{t.id===e&&(a=[t.data()][0])})),a}catch(t){console.log("error: ",t)}}}},7548:function(e,t,a){a.r(t),a.d(t,{default:function(){return ke}});var n=a(3396);function r(e,t,a,r,i,s){const d=(0,n.up)("ApartmentDescription"),c=(0,n.up)("ApartmentInfo"),o=(0,n.up)("Container"),u=(0,n.up)("MainApp");return(0,n.wg)(),(0,n.j4)(u,{class:"main"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"apartment-page__container"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{description:e.apartment.descr,price:e.apartment.price,rating:e.apartment.rating,imgUrl:e.apartment.imgUrl,title:e.apartment.title},null,8,["description","price","rating","imgUrl","title"]),(0,n.Wm)(c)])),_:1})])),_:1})}var i=a(7139);const s={class:"apartment"},d={class:"apartment-title__container"},c={class:"apartment-title"},o=["src"],u={class:"apartment__description"},p={key:0},l={key:1};function m(e,t,a,r,m,g){const f=(0,n.up)("StarRating"),_=(0,n.up)("ButtonApp");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",d,[(0,n._)("h2",c,(0,i.zw)(e.title),1),(0,n.Wm)(f,{rating:e.rating},null,8,["rating"])]),(0,n._)("img",{class:"apartment__image",src:e.imgUrl,alt:"apartment image"},null,8,o),(0,n._)("p",u,(0,i.zw)(e.description),1),(0,n.Wm)(_,{class:"apartment__btn",onClick:e.reserve,outlined:e.isReserved,"is-loading":e.isLoading},{default:(0,n.w5)((()=>[e.isReserved?((0,n.wg)(),(0,n.iD)("span",p,"Reserved")):((0,n.wg)(),(0,n.iD)("span",l,"Reserve"))])),_:1},8,["onClick","outlined","is-loading"])])}var g=a(7937),f=a(1978),_=a(1284),b=a(65),v=(0,n.aZ)({name:"ApartmentDescription",components:{StarRating:g.Z,ButtonApp:f.Z},data(){return{id:this.$route.params.id,isReserved:!1,isLoading:!1}},props:{imgUrl:{type:String,default:""},description:{type:String,required:!0},rating:{type:Number,default:0},price:{type:Number,required:!0},title:{type:String,required:!0}},computed:{...(0,b.rn)("auth",["user"])},methods:{async reserve(){try{this.isLoading=!0;let e="";"string"===typeof this.$route.params.id&&(e=this.$route.params.id);const t=this.user.uid;this.isReserved?(await _.Z.unReserveApartment(e,t),this.isReserved=!1):(await _.Z.reserveApartment(e,t),this.isReserved=!0)}catch(e){console.log("error: ",e)}finally{this.isLoading=!1}}}}),k=a(89);const h=(0,k.Z)(v,[["render",m],["__scopeId","data-v-262185e6"]]);var w=h,y=a(8202),C=a(8445);const Z={class:"apartment-info"};function A(e,t,a,r,i,s){const d=(0,n.up)("ApartmentOwner"),c=(0,n.up)("ApartmentFeedback");return(0,n.wg)(),(0,n.iD)("div",Z,[(0,n.Wm)(d),(0,n.Wm)(c)])}const R=e=>((0,n.dD)("data-v-75ff4bde"),e=e(),(0,n.Cn)(),e),D={class:"owner"},I=R((()=>(0,n._)("h3",{class:"owner__title"},"Information about owner",-1))),L={class:"owner__name item"},S={class:"owner__tel item"},x={class:"owner__email"};function W(e,t,a,r,s,d){return(0,n.wg)(),(0,n.iD)("div",D,[I,(0,n._)("p",L,"Name: "+(0,i.zw)(e.name),1),(0,n._)("p",S,"tel: "+(0,i.zw)(e.phone),1),(0,n._)("p",x,"e-mail: "+(0,i.zw)(e.email),1)])}var F=(0,n.aZ)({name:"ApartmentOwner",props:{name:{type:String,default:"Vasya"},phone:{type:String,default:"+38011111111"},email:{type:String,default:"mail@mail.com"}}});const z=(0,k.Z)(F,[["render",W],["__scopeId","data-v-75ff4bde"]]);var U=z;const H={class:"feedback-board"};function N(e,t,a,r,s,d){const c=(0,n.up)("FeedbackHead"),o=(0,n.up)("ApartmentFeedbackItem"),u=(0,n.up)("LoadMoreBtn");return(0,n.wg)(),(0,n.iD)("div",H,[(0,n.Wm)(c,{feedbacksCount:e.feedbacksCount,totalRatingCount:e.totalRatingCount},null,8,["feedbacksCount","totalRatingCount"]),(0,n._)("div",{class:(0,i.C_)(["feedback-board__list",e.feedbackListHeight])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.feedbackData,(e=>((0,n.wg)(),(0,n.j4)(o,{key:e.id,rating:e.rating,name:e.name,text:e.text},null,8,["rating","name","text"])))),128))],2),(0,n.Wm)(u,{onClick:e.toggleFeedbackData},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.loadBtnText),1)])),_:1},8,["onClick"])])}var B=a.p+"img/user-avatar.ee501ef0.svg";const $=e=>((0,n.dD)("data-v-4bc85b24"),e=e(),(0,n.Cn)(),e),q={class:"feedback"},M={class:"feedback__head"},E=$((()=>(0,n._)("img",{class:"feedback__image",src:B},null,-1))),J={class:"feedback-owner"},O={class:"feedback-owner__name"},T={class:"feedback__text"};function j(e,t,a,r,s,d){const c=(0,n.up)("StarRating");return(0,n.wg)(),(0,n.iD)("div",q,[(0,n._)("div",M,[E,(0,n._)("div",J,[(0,n._)("p",O,(0,i.zw)(e.name),1),(0,n.Wm)(c,{rating:e.rating},null,8,["rating"])])]),(0,n._)("p",T,(0,i.zw)(e.text),1)])}var P=(0,n.aZ)({name:"ApartmentFeedbackItem",components:{StarRating:g.Z},props:{rating:{type:Number,required:!0},name:{type:String,default:"No name"},text:{type:String,default:""}}});const K=(0,k.Z)(P,[["render",j],["__scopeId","data-v-4bc85b24"]]);var V=K;const Y=e=>((0,n.dD)("data-v-6fdbf122"),e=e(),(0,n.Cn)(),e),G={class:"head"},Q=Y((()=>(0,n._)("h3",{class:"head__title"},"Total rating",-1))),X={class:"head__rating"};function ee(e,t,a,r,s,d){const c=(0,n.up)("StarRating");return(0,n.wg)(),(0,n.iD)("div",G,[Q,(0,n._)("div",X,[(0,n._)("p",null,(0,i.zw)(e.feedbacksCount)+" feedbacks",1),(0,n.Wm)(c,{rating:e.totalRatingCount},null,8,["rating"])])])}var te=(0,n.aZ)({name:"FeedbackHead",components:{StarRating:g.Z},props:{feedbacksCount:{type:Number,default:0},totalRatingCount:{type:Number,default:0}}});const ae=(0,k.Z)(te,[["render",ee],["__scopeId","data-v-6fdbf122"]]);var ne=ae;const re={class:"btn"};function ie(e,t,a,r,i,s){return(0,n.wg)(),(0,n.iD)("button",re,[(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var se=(0,n.aZ)({setup(){return{}}});const de=(0,k.Z)(se,[["render",ie],["__scopeId","data-v-688a5794"]]);var ce=de,oe=[{name:"Iryna",rating:4,text:"Особенно понравилось местоположение, в самом центре города, на набережной. Вид балкона великолепный! Приятный владелец. Реком...",id:"1"},{name:"Ludmyla",rating:5,text:"Понравилось все!!! Начиная того, как была предоставлна информация том, как добраться и попасть в апартаменты (часто с этим бывают пробле...",id:"2"},{name:"Iryna2",rating:4,text:"Особенно понравилось местоположение, в самом центре города, на набережной. Вид c балкона великолепный! Приятный владелец. Реком...",id:"3"},{name:"Ludmyla2",rating:5,text:"Понравилось все!!! Начиная c того, как была предоставлна информация о том, как добраться и попасть в апартаменты (часто с этим бывают пробле...",id:"5"}],ue=(0,n.aZ)({name:"ApartmentFeedback",components:{ApartmentFeedbackItem:V,LoadMoreBtn:ce,FeedbackHead:ne},setup(){return{data:oe}},data(){return{feedbacksLimit:2}},methods:{toggleFeedbackData(){2===this.feedbacksLimit?this.feedbacksLimit=this.feedbacksCount:this.feedbacksLimit=2}},computed:{loadBtnText(){return this.feedbacksLimit>2?"Hide":"Read more.."},feedbackListHeight(){return this.feedbacksLimit>2?"height":null},feedbacksCount(){return this.data.length},totalRatingCount(){return 0===this.feedbacksCount?0:this.data.reduce(((e,t)=>e+t.rating),0)/this.feedbacksCount},feedbackData(){return this.data.slice(0,this.feedbacksLimit)}}});const pe=(0,k.Z)(ue,[["render",N],["__scopeId","data-v-58eb665c"]]);var le=pe,me=(0,n.aZ)({name:"ApartmentInfo",components:{ApartmentOwner:U,ApartmentFeedback:le}});const ge=(0,k.Z)(me,[["render",A],["__scopeId","data-v-49cb897c"]]);var fe=ge,_e=a(7175),be=(0,n.aZ)({name:"ApartmentPage",components:{MainApp:C.Z,Container:y.Z,ApartmentDescription:w,ApartmentInfo:fe},computed:{apartment(){return _e.Z.filter((e=>e.id===this.$route.params.id))[0]}}});const ve=(0,k.Z)(be,[["render",r],["__scopeId","data-v-92f5d7e0"]]);var ke=ve}}]);
//# sourceMappingURL=917.ea7e276f.js.map